{% trans_default_domain 'FOSUserBundle' %}



<div class="container mtb">
    <div class="row centered">        
        {% set flash_error = app.session.flashbag.get('error') %}
        {% if flash_error %}
            <div class="alert alert-danger">
                <ul>
                    {% for flash_message in flash_error %}
                        <li>{{ flash_message }}</li>

                    {% endfor %}

                </ul>
            </div>
        {% endif %}

        {{ form_start(form, { 'action': path('fos_user_profile_edit'),'method':'POST', 'name':'editProfile', 'attr': { 'class': 'fos_user_profile_edit form-horizontal' , 'id':'formEditProfile'} }) 
        }}
        {% if not form.vars.valid %}            
            <div class="alert alert-error" role="alert">
                {% for child in form.children %}
                    {# Display the errors of the form item #}
                    <ul>
                        {%for error in child.vars.errors%}                
                            <li>{{error.message}}</li>                            
                            {%endfor%}
                    </ul>
                {%endfor%}  
            </div>
        {% endif %}
        <div class="form-group">
            <label for="fos_user_profile_form[username]" class="col-sm-offset-2 col-sm-2  control-label">Usuario</label>
            <div class="col-sm-4">
                {{ form_widget(form.username,{ 'attr': {'class': 'form-control'} }) }} 
            </div>
        </div>
        <div class="form-group">
            <label for="fos_user_profile_form[firstName]" class="col-sm-offset-2 col-sm-2 control-label">Nombre</label>
            <div class="col-sm-4">
                {{ form_widget(form.firstName,{ 'attr': {'class': 'form-control'} }) }}
            </div>
        </div>
        <div class="form-group">
            <label for="fos_user_profile_form[lastName]" class="col-sm-offset-2 col-sm-2 control-label">Apellido</label>
            <div class="col-sm-4">
                {{ form_widget(form.lastName,{ 'attr': {'class': 'form-control'} }) }}
            </div>
        </div>
        <div class="form-group">
            <label for="fos_user_profile_form[phone]" class="col-sm-offset-2 col-sm-2 control-label">Teléfono</label>
            <div class="col-sm-4">
                {{ form_widget(form.phone,{ 'attr': {'class': 'form-control', 'pattern': '^[+]?[0-9]{9,12}$'}} ) }}
            </div>
        </div>
        <div class="form-group">
            <label for="fos_user_profile_form[email]" class="col-sm-offset-2 col-sm-2 control-label">Email</label>
            <div class="col-sm-4">
                {{ form_widget(form.email,{ 'attr': {'class': 'form-control'} }) }}
            </div>
        </div>
        <div class="form-group">
            <label for="fos_user_profile_form[current_password]" class="col-sm-offset-2 col-sm-2 control-label">Contraseña actual</label>
            <div class="col-sm-4">
                {{ form_widget(form.current_password,{ 'attr': {'class': 'form-control'} }) }}
            </div>
        </div>    
        <div class="form-group">
            <label for="fos_user_profile_form_imageFile_file" class="col-sm-offset-2 col-sm-2 control-label">Imagen del perfil</label>
            <div class="col-sm-4">
                {{ form_widget(form.imageFile,{ 'attr': {'class': 'form-control'} }) }}
            </div>
        </div>    
        <div class="form-group">
            <div class="col-sm-offset-4 col-sm-4">
                <button type="submit" class="btn btn-block btn-theme" value="{{ 'profile.edit.submit'|trans }}">Actualizar usuario</button>
            </div>
        </div>

        {{ form_end(form) }}        
    </div><! --/row -->
</div><! --/container -->


